{% extends "stats/table_base.html" %}

{% set table_header="Department sales total" %}

{% block table_content %}
<table class="table table-striped table-bordered table-hover" id="department-sales-table">
    <thead>
        <tr>
            <th>Department</th>
            <th>Quantity</th>
            <th>Total (&#163;)</th>
        </tr>
    </thead>
    <tbody>
        {% for department in department_sales_data.values() %}
        <tr>
            <td>{{ department.name }}</td>
            <td>{{ department.qty_sum }}</td>
            <td>{{ department.price_sum }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% set total_qty = department_sales_data.values()|sum(attribute='qty_sum') %}
{% set total_price = department_sales_data.values()|sum(attribute='price_sum') %}
<p>Total quantity: {{ total_qty }}</p>
<p>Total price: {{ '%0.2f'| format(total_price|float) }}</p>
{% endblock %}